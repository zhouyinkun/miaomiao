{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue","mtime":1581321923428},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":1580973553675},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580973554294},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":1580973574382}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgovL2ltcG9ydCBCU2Nyb2xsIGZyb20gJ2JldHRlci1zY3JvbGwnOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZSA6ICdOb3dQbGF5aW5nJywKICAgIGRhdGEoKXsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBtb3ZpZUxpc3QgOiBbXSwKICAgICAgICAgICAgcHVsbERvd25Nc2cgOiAnJywvL+S4i+aLieS/oeaBrwogICAgICAgICAgICBpc0xvYWRpbmcgOiB0cnVlLC8v5Yik5pat5piv5ZCm5Yqg6L295a6M5oiQCiAgICAgICAgICAgIHByZXZDaXR5SWQgOiAtMQogICAgICAgIH0KICAgIH0sCiAgICBhY3RpdmF0ZWQoKXsvL+W9k2tlZXAtYWxpdmXnu4Tku7bmv4DmtLvosIPnlKgKICAgICAgICB0aGlzLmF4aW9zLmdldCgnL2FwaS9tb3ZpZU9uSW5mb0xpc3Q/Y2l0eUlkPTEwJykudGhlbigocmVzKT0+ewogICAgICAgICAgICB2YXIgbXNnID0gcmVzLmRhdGEubXNnOwogICAgICAgICAgICBpZiggbXNnID09PSAnb2snICl7CiAgICAgICAgICAgICAgICB0aGlzLm1vdmllTGlzdCA9IHJlcy5kYXRhLmRhdGEubW92aWVMaXN0OwogICAgICAgICAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICAgICAgLypiZXR0ZXItc2Nyb2xs5L2/55So5p2h5Lu2OgogICAgICAgICAgICAgICAgICAgIDEu5b+F6aG75pWw5o2u5a6M5YWo5riy5p+T5Yiw6aG16Z2i5omN6IO95L2/55SoCiAgICAgICAgICAgICAgICAgICAgMi7lv4XpobvlpJbpnaLlrrnlmajlpKfkuo7ph4zpnaLlrrnlmagKICAgICAgICAgICAgICAgIOS/neivgeaVsOaNrua4suafk+WQjuaJjeS8muinpuWPkeaWueazleeahOWbnuiwgwogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIC8qdGhpcy4kbmV4dFRpY2soKCk9PnsvL+esrOS4gOS4quWPguaVsO+8muWklumDqOWuueWZqGNsYXNzbmFtZSzphY3nva7lsZ7mgKcKICAgICAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsID0gbmV3IEJTY3JvbGwodGhpcy4kcmVmcy5tb3ZpZV9ib2R5LHsKICAgICAgICAgICAgICAgICAgICAgICAgLy/lvIDlkK90YXDop6blj5Hkuovku7YKICAgICAgICAgICAgICAgICAgICAgICAgdGFwIDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgLy/mu5rliqjnmoTml7blgJnkvJrmtL7lj5FzY3JvbGzkuovku7bvvIzkvJrmiKrmtYHvvIjkuIDmrrXml7bpl7TlhoXop6blj5HkuIDmrKHvvIkKICAgICAgICAgICAgICAgICAgICAgICAgcHJvYmVUeXBlOjEKICAgICAgICAgICAgICAgICAgICB9KTsgCiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsLm9uKCdzY3JvbGwnLChwb3MpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzY3JvbGzkuovku7YiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocG9zLnk+MzApey8vcG9z5piv5qOA5rWL5b2T5YmN5L2N572u77yM5piv5Liq5a+56LGh5pyJeHkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVsbERvd25Nc2cgPSAn5q2j5Zyo5Yi35paw5LitJwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgLy/lvZPmi5bmi73nu5PmnZ/lkI7op6blj5HnmoTkuovku7YKICAgICAgICAgICAgICAgICAgICBzY3JvbGwub24oJ3RvdWNoRW5kJywocG9zKT0+ewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygidG91Y2hFbmTkuovku7YiKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocG9zLnk+MzApey8v6YeN5paw6K+35rGCYWpheAogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoJy9hcGkvbW92aWVPbkluZm9MaXN0P2NpdHlJZD0xMCcpLnRoZW4oKHJlcyk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1bGxEb3duTXNnID0gJ+abtOaWsOaIkOWKnycKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92aWVMaXN0ID0gcmVzLmRhdGEuZGF0YS5tb3ZpZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVsbERvd25Nc2cgPSAnJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sMTAwMCk7Ly/lu7bml7YxcwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7Ki8KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfSwKICAgIG1ldGhvZHMgOiB7CiAgICAgICAgaGFuZGxlVG9EZXRhaWwobW92aWVJZCl7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvbW92aWUvZGV0YWlsLzEvJyttb3ZpZUlkKTsKICAgICAgICB9LAogICAgICAgIGhhbmRsZVRvU2Nyb2xsKHBvcyl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJTY3JvbGzkuovku7YiKTsKICAgICAgICAgICAgaWYocG9zLnk+MzApey8vcG9z5piv5qOA5rWL5b2T5YmN5L2N572u77yM5piv5Liq5a+56LGh5pyJeHkKICAgICAgICAgICAgICAgIHRoaXMucHVsbERvd25Nc2cgPSAn5q2j5Zyo5Yi35paw5LitJwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBoYW5kbGVUb1RvdWNoRW5kKHBvcyl7CiAgICAgICAgICAgIGlmKHBvcy55PjMwKXsvL+mHjeaWsOivt+axgmFqYXgKICAgICAgICAgICAgICAgIHRoaXMuYXhpb3MuZ2V0KCcvYXBpL21vdmllT25JbmZvTGlzdD9jaXR5SWQ9MScpLnRoZW4oKHJlcyk9PnsKICAgICAgICAgICAgICAgICAgICB0aGlzLnB1bGxEb3duTXNnID0gJ+abtOaWsOaIkOWKnycKICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92aWVMaXN0ID0gcmVzLmRhdGEuZGF0YS5tb3ZpZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVsbERvd25Nc2cgPSAnJwogICAgICAgICAgICAgICAgICAgIH0sMTAwMCk7Ly/lu7bml7YxcwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gICAgICAgICAgICAKICAgICAgICB9CiAgICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/NowPlaying","sourcesContent":["<template>\n    <div class=\"movie_body\" ref=\"movie_body\">\n        <Loading v-if=\"isLoading\"/>\n        <!-- 进行父子通信，传递两个方法 -->\n        <Scroller v-else :handleToScroll=\"handleToScroll\" :handleToTouchEnd=\"handleToTouchEnd\">\n            <ul>\n                <!-- <li>\n                    <div class=\"pic_show\"><img src=\"/images/movie_1.jpg\"></div>\n                    <div class=\"info_list\">\n                        <h2>无名之辈</h2>\n                        <p>观众评 <span class=\"grade\">9.2</span></p>\n                        <p>主演: 陈建斌,任素汐,潘斌龙</p>\n                        <p>今天55家影院放映607场</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li> -->\n                <li class=\"pullDown\">{{pullDownMsg}}</li>\n                <li v-for=\"item in movieList\" :key=\"item.id\">\n                    <div class=\"pic_show\" @tap=\"handleToDetail(item.id)\"><img :src=\"item.img | setWH('128.180')\"></div>\n                    <div class=\"info_list\">\n                        <h2 @tap=\"handleToDetail(item.id)\">{{ item.nm }} <img v-if=\"item.version\" src=\"@/assets/maxs.png\" alt=\"\"></h2>\n                        <p>观众评 <span class=\"grade\">{{ item.sc }}</span></p>\n                        <p>主演: {{ item.star }}</p>\n                        <p>{{ item.showInfo }}</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li>\n            </ul>\n        </Scroller>\n    </div>\n</template>\n\n<script>\n\n//import BScroll from 'better-scroll';\n\nexport default {\n    name : 'NowPlaying',\n    data(){\n        return {\n            movieList : [],\n            pullDownMsg : '',//下拉信息\n            isLoading : true,//判断是否加载完成\n            prevCityId : -1\n        }\n    },\n    activated(){//当keep-alive组件激活调用\n        this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n            var msg = res.data.msg;\n            if( msg === 'ok' ){\n                this.movieList = res.data.data.movieList;\n                this.isLoading = false\n                /*better-scroll使用条件:\n                    1.必须数据完全渲染到页面才能使用\n                    2.必须外面容器大于里面容器\n                保证数据渲染后才会触发方法的回调\n                */\n                /*this.$nextTick(()=>{//第一个参数：外部容器classname,配置属性\n                    var scroll = new BScroll(this.$refs.movie_body,{\n                        //开启tap触发事件\n                        tap : true,\n                        //滚动的时候会派发scroll事件，会截流（一段时间内触发一次）\n                        probeType:1\n                    }); \n                    scroll.on('scroll',(pos)=>{\n                        console.log(\"scroll事件\");\n                        if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                            this.pullDownMsg = '正在刷新中'\n                        }\n                    });\n                    //当拖拽结束后触发的事件\n                    scroll.on('touchEnd',(pos)=>{\n                        console.log(\"touchEnd事件\");\n                        if(pos.y>30){//重新请求ajax\n                            this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n                                this.pullDownMsg = '更新成功'\n                                setTimeout(()=>{\n                                    this.movieList = res.data.data.movieList;\n                                    this.pullDownMsg = ''\n                                },1000);//延时1s\n                            });\n                        }\n                    })\n                });*/\n            }\n        });\n    },\n    methods : {\n        handleToDetail(movieId){\n            this.$router.push('/movie/detail/1/'+movieId);\n        },\n        handleToScroll(pos){\n            console.log(\"Scroll事件\");\n            if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                this.pullDownMsg = '正在刷新中'\n            }\n        },\n        handleToTouchEnd(pos){\n            if(pos.y>30){//重新请求ajax\n                this.axios.get('/api/movieOnInfoList?cityId=1').then((res)=>{\n                    this.pullDownMsg = '更新成功'\n                    setTimeout(()=>{\n                        this.movieList = res.data.data.movieList;\n                        this.pullDownMsg = ''\n                    },1000);//延时1s\n                });\n            }            \n        }\n    }\n}\n</script>\n\n<style scoped>\n#content .movie_body{ flex:1; overflow:auto;}\n.movie_body ul{ margin:0 12px; overflow: hidden;}\n.movie_body ul li{ margin-top:12px; display: flex; align-items:center; border-bottom: 1px #e6e6e6 solid; padding-bottom: 10px;}\n.movie_body .pic_show{ width:64px; height: 90px;}\n.movie_body .pic_show img{ width:100%;}\n.movie_body .info_list { margin-left: 10px; flex:1; position: relative;}\n.movie_body .info_list h2{ font-size: 17px; line-height: 24px; width:150px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list p{ font-size: 13px; color:#666; line-height: 22px; width:200px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list .grade{ font-weight: 700; color: #faaf00; font-size: 15px;}\n.movie_body .info_list img{ width:50px; position: absolute; right:10px; top: 5px;}\n.movie_body .btn_mall , .movie_body .btn_pre{ width:47px; height:27px; line-height: 28px; text-align: center; background-color: #f03d37; color: #fff; border-radius: 4px; font-size: 12px; cursor: pointer;}\n.movie_body .btn_pre{ background-color: #3c9fe6;}\n.movie_body .pullDown{ margin:0; padding:0; border:none;}\n</style>\n"]}]}