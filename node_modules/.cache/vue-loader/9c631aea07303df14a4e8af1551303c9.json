{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue?vue&type=style&index=0&id=10124fc4&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue","mtime":1581321923428},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\css-loader\\dist\\cjs.js","mtime":1580973559036},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1580973574385},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\postcss-loader\\src\\index.js","mtime":1580973568430},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580973554294},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":1580973574382}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKI2NvbnRlbnQgLm1vdmllX2JvZHl7IGZsZXg6MTsgb3ZlcmZsb3c6YXV0bzt9Ci5tb3ZpZV9ib2R5IHVseyBtYXJnaW46MCAxMnB4OyBvdmVyZmxvdzogaGlkZGVuO30KLm1vdmllX2JvZHkgdWwgbGl7IG1hcmdpbi10b3A6MTJweDsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6Y2VudGVyOyBib3JkZXItYm90dG9tOiAxcHggI2U2ZTZlNiBzb2xpZDsgcGFkZGluZy1ib3R0b206IDEwcHg7fQoubW92aWVfYm9keSAucGljX3Nob3d7IHdpZHRoOjY0cHg7IGhlaWdodDogOTBweDt9Ci5tb3ZpZV9ib2R5IC5waWNfc2hvdyBpbWd7IHdpZHRoOjEwMCU7fQoubW92aWVfYm9keSAuaW5mb19saXN0IHsgbWFyZ2luLWxlZnQ6IDEwcHg7IGZsZXg6MTsgcG9zaXRpb246IHJlbGF0aXZlO30KLm1vdmllX2JvZHkgLmluZm9fbGlzdCBoMnsgZm9udC1zaXplOiAxN3B4OyBsaW5lLWhlaWdodDogMjRweDsgd2lkdGg6MTUwcHg7IG92ZXJmbG93OiBoaWRkZW47IHdoaXRlLXNwYWNlOiBub3dyYXA7IHRleHQtb3ZlcmZsb3c6ZWxsaXBzaXM7fQoubW92aWVfYm9keSAuaW5mb19saXN0IHB7IGZvbnQtc2l6ZTogMTNweDsgY29sb3I6IzY2NjsgbGluZS1oZWlnaHQ6IDIycHg7IHdpZHRoOjIwMHB4OyBvdmVyZmxvdzogaGlkZGVuOyB3aGl0ZS1zcGFjZTogbm93cmFwOyB0ZXh0LW92ZXJmbG93OmVsbGlwc2lzO30KLm1vdmllX2JvZHkgLmluZm9fbGlzdCAuZ3JhZGV7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjZmFhZjAwOyBmb250LXNpemU6IDE1cHg7fQoubW92aWVfYm9keSAuaW5mb19saXN0IGltZ3sgd2lkdGg6NTBweDsgcG9zaXRpb246IGFic29sdXRlOyByaWdodDoxMHB4OyB0b3A6IDVweDt9Ci5tb3ZpZV9ib2R5IC5idG5fbWFsbCAsIC5tb3ZpZV9ib2R5IC5idG5fcHJleyB3aWR0aDo0N3B4OyBoZWlnaHQ6MjdweDsgbGluZS1oZWlnaHQ6IDI4cHg7IHRleHQtYWxpZ246IGNlbnRlcjsgYmFja2dyb3VuZC1jb2xvcjogI2YwM2QzNzsgY29sb3I6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDRweDsgZm9udC1zaXplOiAxMnB4OyBjdXJzb3I6IHBvaW50ZXI7fQoubW92aWVfYm9keSAuYnRuX3ByZXsgYmFja2dyb3VuZC1jb2xvcjogIzNjOWZlNjt9Ci5tb3ZpZV9ib2R5IC5wdWxsRG93bnsgbWFyZ2luOjA7IHBhZGRpbmc6MDsgYm9yZGVyOm5vbmU7fQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/NowPlaying","sourcesContent":["<template>\n    <div class=\"movie_body\" ref=\"movie_body\">\n        <Loading v-if=\"isLoading\"/>\n        <!-- 进行父子通信，传递两个方法 -->\n        <Scroller v-else :handleToScroll=\"handleToScroll\" :handleToTouchEnd=\"handleToTouchEnd\">\n            <ul>\n                <!-- <li>\n                    <div class=\"pic_show\"><img src=\"/images/movie_1.jpg\"></div>\n                    <div class=\"info_list\">\n                        <h2>无名之辈</h2>\n                        <p>观众评 <span class=\"grade\">9.2</span></p>\n                        <p>主演: 陈建斌,任素汐,潘斌龙</p>\n                        <p>今天55家影院放映607场</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li> -->\n                <li class=\"pullDown\">{{pullDownMsg}}</li>\n                <li v-for=\"item in movieList\" :key=\"item.id\">\n                    <div class=\"pic_show\" @tap=\"handleToDetail(item.id)\"><img :src=\"item.img | setWH('128.180')\"></div>\n                    <div class=\"info_list\">\n                        <h2 @tap=\"handleToDetail(item.id)\">{{ item.nm }} <img v-if=\"item.version\" src=\"@/assets/maxs.png\" alt=\"\"></h2>\n                        <p>观众评 <span class=\"grade\">{{ item.sc }}</span></p>\n                        <p>主演: {{ item.star }}</p>\n                        <p>{{ item.showInfo }}</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li>\n            </ul>\n        </Scroller>\n    </div>\n</template>\n\n<script>\n\n//import BScroll from 'better-scroll';\n\nexport default {\n    name : 'NowPlaying',\n    data(){\n        return {\n            movieList : [],\n            pullDownMsg : '',//下拉信息\n            isLoading : true,//判断是否加载完成\n            prevCityId : -1\n        }\n    },\n    activated(){//当keep-alive组件激活调用\n        this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n            var msg = res.data.msg;\n            if( msg === 'ok' ){\n                this.movieList = res.data.data.movieList;\n                this.isLoading = false\n                /*better-scroll使用条件:\n                    1.必须数据完全渲染到页面才能使用\n                    2.必须外面容器大于里面容器\n                保证数据渲染后才会触发方法的回调\n                */\n                /*this.$nextTick(()=>{//第一个参数：外部容器classname,配置属性\n                    var scroll = new BScroll(this.$refs.movie_body,{\n                        //开启tap触发事件\n                        tap : true,\n                        //滚动的时候会派发scroll事件，会截流（一段时间内触发一次）\n                        probeType:1\n                    }); \n                    scroll.on('scroll',(pos)=>{\n                        console.log(\"scroll事件\");\n                        if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                            this.pullDownMsg = '正在刷新中'\n                        }\n                    });\n                    //当拖拽结束后触发的事件\n                    scroll.on('touchEnd',(pos)=>{\n                        console.log(\"touchEnd事件\");\n                        if(pos.y>30){//重新请求ajax\n                            this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n                                this.pullDownMsg = '更新成功'\n                                setTimeout(()=>{\n                                    this.movieList = res.data.data.movieList;\n                                    this.pullDownMsg = ''\n                                },1000);//延时1s\n                            });\n                        }\n                    })\n                });*/\n            }\n        });\n    },\n    methods : {\n        handleToDetail(movieId){\n            this.$router.push('/movie/detail/1/'+movieId);\n        },\n        handleToScroll(pos){\n            console.log(\"Scroll事件\");\n            if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                this.pullDownMsg = '正在刷新中'\n            }\n        },\n        handleToTouchEnd(pos){\n            if(pos.y>30){//重新请求ajax\n                this.axios.get('/api/movieOnInfoList?cityId=1').then((res)=>{\n                    this.pullDownMsg = '更新成功'\n                    setTimeout(()=>{\n                        this.movieList = res.data.data.movieList;\n                        this.pullDownMsg = ''\n                    },1000);//延时1s\n                });\n            }            \n        }\n    }\n}\n</script>\n\n<style scoped>\n#content .movie_body{ flex:1; overflow:auto;}\n.movie_body ul{ margin:0 12px; overflow: hidden;}\n.movie_body ul li{ margin-top:12px; display: flex; align-items:center; border-bottom: 1px #e6e6e6 solid; padding-bottom: 10px;}\n.movie_body .pic_show{ width:64px; height: 90px;}\n.movie_body .pic_show img{ width:100%;}\n.movie_body .info_list { margin-left: 10px; flex:1; position: relative;}\n.movie_body .info_list h2{ font-size: 17px; line-height: 24px; width:150px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list p{ font-size: 13px; color:#666; line-height: 22px; width:200px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list .grade{ font-weight: 700; color: #faaf00; font-size: 15px;}\n.movie_body .info_list img{ width:50px; position: absolute; right:10px; top: 5px;}\n.movie_body .btn_mall , .movie_body .btn_pre{ width:47px; height:27px; line-height: 28px; text-align: center; background-color: #f03d37; color: #fff; border-radius: 4px; font-size: 12px; cursor: pointer;}\n.movie_body .btn_pre{ background-color: #3c9fe6;}\n.movie_body .pullDown{ margin:0; padding:0; border:none;}\n</style>\n"]}]}