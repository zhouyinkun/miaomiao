{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\src\\components\\NowPlaying\\index.vue","mtime":1581321923428},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580973554294},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\babel-loader\\lib\\index.js","mtime":1580973553675},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1580973554294},{"path":"C:\\Users\\Administrator\\Desktop\\Web\\project\\miaomiao\\node_modules\\vue-loader\\lib\\index.js","mtime":1580973574382}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy9pbXBvcnQgQlNjcm9sbCBmcm9tICdiZXR0ZXItc2Nyb2xsJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdOb3dQbGF5aW5nJywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbW92aWVMaXN0OiBbXSwKICAgICAgcHVsbERvd25Nc2c6ICcnLAogICAgICAvL+S4i+aLieS/oeaBrwogICAgICBpc0xvYWRpbmc6IHRydWUsCiAgICAgIC8v5Yik5pat5piv5ZCm5Yqg6L295a6M5oiQCiAgICAgIHByZXZDaXR5SWQ6IC0xCiAgICB9OwogIH0sCiAgYWN0aXZhdGVkOiBmdW5jdGlvbiBhY3RpdmF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIC8v5b2Ta2VlcC1hbGl2Zee7hOS7tua/gOa0u+iwg+eUqAogICAgdGhpcy5heGlvcy5nZXQoJy9hcGkvbW92aWVPbkluZm9MaXN0P2NpdHlJZD0xMCcpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICB2YXIgbXNnID0gcmVzLmRhdGEubXNnOwoKICAgICAgaWYgKG1zZyA9PT0gJ29rJykgewogICAgICAgIF90aGlzLm1vdmllTGlzdCA9IHJlcy5kYXRhLmRhdGEubW92aWVMaXN0OwogICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIC8qYmV0dGVyLXNjcm9sbOS9v+eUqOadoeS7tjoKICAgICAgICAgICAgMS7lv4XpobvmlbDmja7lrozlhajmuLLmn5PliLDpobXpnaLmiY3og73kvb/nlKgKICAgICAgICAgICAgMi7lv4XpobvlpJbpnaLlrrnlmajlpKfkuo7ph4zpnaLlrrnlmagKICAgICAgICDkv53or4HmlbDmja7muLLmn5PlkI7miY3kvJrop6blj5Hmlrnms5XnmoTlm57osIMKICAgICAgICAqLwoKICAgICAgICAvKnRoaXMuJG5leHRUaWNrKCgpPT57Ly/nrKzkuIDkuKrlj4LmlbDvvJrlpJbpg6jlrrnlmahjbGFzc25hbWUs6YWN572u5bGe5oCnCiAgICAgICAgICAgIHZhciBzY3JvbGwgPSBuZXcgQlNjcm9sbCh0aGlzLiRyZWZzLm1vdmllX2JvZHksewogICAgICAgICAgICAgICAgLy/lvIDlkK90YXDop6blj5Hkuovku7YKICAgICAgICAgICAgICAgIHRhcCA6IHRydWUsCiAgICAgICAgICAgICAgICAvL+a7muWKqOeahOaXtuWAmeS8mua0vuWPkXNjcm9sbOS6i+S7tu+8jOS8muaIqua1ge+8iOS4gOauteaXtumXtOWGheinpuWPkeS4gOasoe+8iQogICAgICAgICAgICAgICAgcHJvYmVUeXBlOjEKICAgICAgICAgICAgfSk7IAogICAgICAgICAgICBzY3JvbGwub24oJ3Njcm9sbCcsKHBvcyk9PnsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzY3JvbGzkuovku7YiKTsKICAgICAgICAgICAgICAgIGlmKHBvcy55PjMwKXsvL3Bvc+aYr+ajgOa1i+W9k+WJjeS9jee9ru+8jOaYr+S4quWvueixoeaciXh5CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWxsRG93bk1zZyA9ICfmraPlnKjliLfmlrDkuK0nCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvL+W9k+aLluaLvee7k+adn+WQjuinpuWPkeeahOS6i+S7tgogICAgICAgICAgICBzY3JvbGwub24oJ3RvdWNoRW5kJywocG9zKT0+ewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInRvdWNoRW5k5LqL5Lu2Iik7CiAgICAgICAgICAgICAgICBpZihwb3MueT4zMCl7Ly/ph43mlrDor7fmsYJhamF4CiAgICAgICAgICAgICAgICAgICAgdGhpcy5heGlvcy5nZXQoJy9hcGkvbW92aWVPbkluZm9MaXN0P2NpdHlJZD0xMCcpLnRoZW4oKHJlcyk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWxsRG93bk1zZyA9ICfmm7TmlrDmiJDlip8nCiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCk9PnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubW92aWVMaXN0ID0gcmVzLmRhdGEuZGF0YS5tb3ZpZUxpc3Q7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1bGxEb3duTXNnID0gJycKICAgICAgICAgICAgICAgICAgICAgICAgfSwxMDAwKTsvL+W7tuaXtjFzCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSk7Ki8KICAgICAgfQogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVUb0RldGFpbDogZnVuY3Rpb24gaGFuZGxlVG9EZXRhaWwobW92aWVJZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL21vdmllL2RldGFpbC8xLycgKyBtb3ZpZUlkKTsKICAgIH0sCiAgICBoYW5kbGVUb1Njcm9sbDogZnVuY3Rpb24gaGFuZGxlVG9TY3JvbGwocG9zKSB7CiAgICAgIGNvbnNvbGUubG9nKCJTY3JvbGzkuovku7YiKTsKCiAgICAgIGlmIChwb3MueSA+IDMwKSB7CiAgICAgICAgLy9wb3PmmK/mo4DmtYvlvZPliY3kvY3nva7vvIzmmK/kuKrlr7nosaHmnIl4eQogICAgICAgIHRoaXMucHVsbERvd25Nc2cgPSAn5q2j5Zyo5Yi35paw5LitJzsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVRvVG91Y2hFbmQ6IGZ1bmN0aW9uIGhhbmRsZVRvVG91Y2hFbmQocG9zKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKHBvcy55ID4gMzApIHsKICAgICAgICAvL+mHjeaWsOivt+axgmFqYXgKICAgICAgICB0aGlzLmF4aW9zLmdldCgnL2FwaS9tb3ZpZU9uSW5mb0xpc3Q/Y2l0eUlkPTEnKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgIF90aGlzMi5wdWxsRG93bk1zZyA9ICfmm7TmlrDmiJDlip8nOwogICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5tb3ZpZUxpc3QgPSByZXMuZGF0YS5kYXRhLm1vdmllTGlzdDsKICAgICAgICAgICAgX3RoaXMyLnB1bGxEb3duTXNnID0gJyc7CiAgICAgICAgICB9LCAxMDAwKTsgLy/lu7bml7YxcwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,WAAA,EAAA,EAFA;AAEA;AACA,MAAA,SAAA,EAAA,IAHA;AAGA;AACA,MAAA,UAAA,EAAA,CAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,SAVA,uBAUA;AAAA;;AAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,gCAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,GAAA,GAAA,GAAA,CAAA,IAAA,CAAA,GAAA;;AACA,UAAA,GAAA,KAAA,IAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AACA;;;;;;AAKA;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA,KAtCA;AAuCA,GAlDA;AAmDA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,OADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,qBAAA,OAAA;AACA,KAHA;AAIA,IAAA,cAJA,0BAIA,GAJA,EAIA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA;;AACA,UAAA,GAAA,CAAA,CAAA,GAAA,EAAA,EAAA;AAAA;AACA,aAAA,WAAA,GAAA,OAAA;AACA;AACA,KATA;AAUA,IAAA,gBAVA,4BAUA,GAVA,EAUA;AAAA;;AACA,UAAA,GAAA,CAAA,CAAA,GAAA,EAAA,EAAA;AAAA;AACA,aAAA,KAAA,CAAA,GAAA,CAAA,+BAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,MAAA;AACA,UAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,CAAA,SAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,SAAA;AACA,YAAA,MAAA,CAAA,WAAA,GAAA,EAAA;AACA,WAHA,EAGA,IAHA,CAAA,CAFA,CAKA;AACA,SANA;AAOA;AACA;AApBA;AAnDA,CAAA","sourcesContent":["<template>\n    <div class=\"movie_body\" ref=\"movie_body\">\n        <Loading v-if=\"isLoading\"/>\n        <!-- 进行父子通信，传递两个方法 -->\n        <Scroller v-else :handleToScroll=\"handleToScroll\" :handleToTouchEnd=\"handleToTouchEnd\">\n            <ul>\n                <!-- <li>\n                    <div class=\"pic_show\"><img src=\"/images/movie_1.jpg\"></div>\n                    <div class=\"info_list\">\n                        <h2>无名之辈</h2>\n                        <p>观众评 <span class=\"grade\">9.2</span></p>\n                        <p>主演: 陈建斌,任素汐,潘斌龙</p>\n                        <p>今天55家影院放映607场</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li> -->\n                <li class=\"pullDown\">{{pullDownMsg}}</li>\n                <li v-for=\"item in movieList\" :key=\"item.id\">\n                    <div class=\"pic_show\" @tap=\"handleToDetail(item.id)\"><img :src=\"item.img | setWH('128.180')\"></div>\n                    <div class=\"info_list\">\n                        <h2 @tap=\"handleToDetail(item.id)\">{{ item.nm }} <img v-if=\"item.version\" src=\"@/assets/maxs.png\" alt=\"\"></h2>\n                        <p>观众评 <span class=\"grade\">{{ item.sc }}</span></p>\n                        <p>主演: {{ item.star }}</p>\n                        <p>{{ item.showInfo }}</p>\n                    </div>\n                    <div class=\"btn_mall\">\n                        购票\n                    </div>\n                </li>\n            </ul>\n        </Scroller>\n    </div>\n</template>\n\n<script>\n\n//import BScroll from 'better-scroll';\n\nexport default {\n    name : 'NowPlaying',\n    data(){\n        return {\n            movieList : [],\n            pullDownMsg : '',//下拉信息\n            isLoading : true,//判断是否加载完成\n            prevCityId : -1\n        }\n    },\n    activated(){//当keep-alive组件激活调用\n        this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n            var msg = res.data.msg;\n            if( msg === 'ok' ){\n                this.movieList = res.data.data.movieList;\n                this.isLoading = false\n                /*better-scroll使用条件:\n                    1.必须数据完全渲染到页面才能使用\n                    2.必须外面容器大于里面容器\n                保证数据渲染后才会触发方法的回调\n                */\n                /*this.$nextTick(()=>{//第一个参数：外部容器classname,配置属性\n                    var scroll = new BScroll(this.$refs.movie_body,{\n                        //开启tap触发事件\n                        tap : true,\n                        //滚动的时候会派发scroll事件，会截流（一段时间内触发一次）\n                        probeType:1\n                    }); \n                    scroll.on('scroll',(pos)=>{\n                        console.log(\"scroll事件\");\n                        if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                            this.pullDownMsg = '正在刷新中'\n                        }\n                    });\n                    //当拖拽结束后触发的事件\n                    scroll.on('touchEnd',(pos)=>{\n                        console.log(\"touchEnd事件\");\n                        if(pos.y>30){//重新请求ajax\n                            this.axios.get('/api/movieOnInfoList?cityId=10').then((res)=>{\n                                this.pullDownMsg = '更新成功'\n                                setTimeout(()=>{\n                                    this.movieList = res.data.data.movieList;\n                                    this.pullDownMsg = ''\n                                },1000);//延时1s\n                            });\n                        }\n                    })\n                });*/\n            }\n        });\n    },\n    methods : {\n        handleToDetail(movieId){\n            this.$router.push('/movie/detail/1/'+movieId);\n        },\n        handleToScroll(pos){\n            console.log(\"Scroll事件\");\n            if(pos.y>30){//pos是检测当前位置，是个对象有xy\n                this.pullDownMsg = '正在刷新中'\n            }\n        },\n        handleToTouchEnd(pos){\n            if(pos.y>30){//重新请求ajax\n                this.axios.get('/api/movieOnInfoList?cityId=1').then((res)=>{\n                    this.pullDownMsg = '更新成功'\n                    setTimeout(()=>{\n                        this.movieList = res.data.data.movieList;\n                        this.pullDownMsg = ''\n                    },1000);//延时1s\n                });\n            }            \n        }\n    }\n}\n</script>\n\n<style scoped>\n#content .movie_body{ flex:1; overflow:auto;}\n.movie_body ul{ margin:0 12px; overflow: hidden;}\n.movie_body ul li{ margin-top:12px; display: flex; align-items:center; border-bottom: 1px #e6e6e6 solid; padding-bottom: 10px;}\n.movie_body .pic_show{ width:64px; height: 90px;}\n.movie_body .pic_show img{ width:100%;}\n.movie_body .info_list { margin-left: 10px; flex:1; position: relative;}\n.movie_body .info_list h2{ font-size: 17px; line-height: 24px; width:150px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list p{ font-size: 13px; color:#666; line-height: 22px; width:200px; overflow: hidden; white-space: nowrap; text-overflow:ellipsis;}\n.movie_body .info_list .grade{ font-weight: 700; color: #faaf00; font-size: 15px;}\n.movie_body .info_list img{ width:50px; position: absolute; right:10px; top: 5px;}\n.movie_body .btn_mall , .movie_body .btn_pre{ width:47px; height:27px; line-height: 28px; text-align: center; background-color: #f03d37; color: #fff; border-radius: 4px; font-size: 12px; cursor: pointer;}\n.movie_body .btn_pre{ background-color: #3c9fe6;}\n.movie_body .pullDown{ margin:0; padding:0; border:none;}\n</style>\n"],"sourceRoot":"src/components/NowPlaying"}]}